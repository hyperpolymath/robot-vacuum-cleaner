# Salt Minion Configuration for Robot Vacuum Cleaner Project
# Provides offline development and maintenance support

# Minion ID (unique identifier for this minion)
id: robot-vacuum-dev

# Master configuration (for offline use, we use masterless mode)
file_client: local

# File roots - where Salt looks for state files
file_roots:
  base:
    - /srv/salt
    - ./salt/states

# Pillar roots - configuration data
pillar_roots:
  base:
    - /srv/pillar
    - ./salt/pillar

# Logging
log_level: info
log_file: /var/log/salt/minion
log_level_logfile: info

# State output
state_output: mixed
state_verbose: True

# Backup files before modification
backup_mode: minion

# Keep job cache for debugging
keep_jobs: 24

# Mine configuration (for service discovery)
mine_interval: 60
mine_functions:
  network.ip_addrs: []
  disk.usage: []

# Event return configuration
event_return: []

# Optimize for local development
multiprocessing: True
timeout: 30

# Cache directory
cachedir: /var/cache/salt/minion

# Extension modules directory
extension_modules: ./salt/modules

# Return data
return_retry_tries: 3

# Performance tuning
req_server_timeout: 30
random_reauth_delay: 60
auth_timeout: 60
auth_tries: 7
acceptance_wait_time: 10
acceptance_wait_time_max: 60

# State compiler settings
state_aggregate: True
state_queue: True

# Failhard mode (stop on first failure)
failhard: False

# Auto-accept minion keys for local development
auto_accept: True

# Environment variables
environment:
  PROJECT_ROOT: .
  PYTHON_VERSION: 3.11
  RUST_VERSION: stable
